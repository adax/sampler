<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        class="com.haulmont.cuba.gui.components.AbstractFrame"
        xmlns:chart="http://schemas.haulmont.com/charts/charts.xsd">
    <dsContext>
        <collectionDatasource id="TransportCountDs"
                              class="com.haulmont.sampler.entity.TransportCount"
                              view="_local">
            <query>
                <![CDATA[select e from sampler$TransportCount e order by e.year]]>
            </query>
        </collectionDatasource>
    </dsContext>
    <layout>
        <chart:serialChart id="stackedArea"
                           categoryField="year"
                           datasource="TransportCountDs"
                           height="100%"
                           marginLeft="0"
                           marginTop="10"
                           plotAreaBorderAlpha="0"
                           width="100%">
            <chart:chartScrollbar/>
            <chart:chartCursor cursorAlpha="0"/>
            <chart:legend equalWidths="false"
                          periodValueText="total: [[value.sum]]"
                          position="TOP"
                          valueAlign="LEFT"
                          valueWidth="100"/>
            <chart:valueAxes>
                <chart:axis gridAlpha="0.07"
                            position="LEFT"
                            stackType="REGULAR"
                            title="Traffic incidents"/>
            </chart:valueAxes>
            <chart:graphs>
                <chart:graph fillAlphas="0.6"
                             hidden="true"
                             lineAlpha="0.4"
                             title="Cars"
                             valueField="cars"/>
                <chart:graph fillAlphas="0.6"
                             lineAlpha="0.4"
                             title="Motorcycles"
                             valueField="motorcycles"/>
                <chart:graph fillAlphas="0.6"
                             lineAlpha="0.4"
                             title="Bicycles"
                             valueField="bicycles"/>
            </chart:graphs>
            <chart:categoryAxis axisColor="#DADADA"
                                gridAlpha="0.07"
                                startOnAxis="true">
                <chart:guides>
                    <chart:guide category="2001"
                                 dashLength="2"
                                 fillAlpha="0.2"
                                 fillColor="#CC0000"
                                 inside="true"
                                 label="fines for speeding increased"
                                 labelRotation="90"
                                 toCategory="2003"/>
                    <chart:guide category="2007"
                                 dashLength="2"
                                 inside="true"
                                 label="motorcycle fee introduced"
                                 labelRotation="90"
                                 lineAlpha="1"
                                 lineColor="#CC0000"/>
                </chart:guides>
            </chart:categoryAxis>
            <chart:exportConfig menuBottom="auto"
                                menuRight="10px"
                                menuTop="10px">
                <chart:menuItems>
                    <chart:menu format="PNG"
                                icon="VAADIN/resources/amcharts/images/export.png"/>
                </chart:menuItems>
                <chart:menuItemOutput fileName="stacked-area"/>
            </chart:exportConfig>
        </chart:serialChart>
    </layout>
</window>
